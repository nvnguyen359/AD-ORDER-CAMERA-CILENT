<div class="flex justify-content-center align-items-center min-h-screen surface-ground px-4">

  <div class="surface-card p-6 shadow-8 border-round-2xl w-full sm:w-30rem">

    <div class="text-center mb-5">
      <div class="text-4xl font-bold mb-2 text-primary">Smart Camera</div>

      <div class="text-900 text-3xl font-medium mb-3">
        {{ isLoginMode ? 'Chào mừng trở lại' : 'Tạo tài khoản' }}
      </div>

      <span class="text-600 font-medium line-height-3">
        {{ isLoginMode ? 'Chưa có tài khoản?' : 'Đã có tài khoản?' }}
        <a class="font-bold no-underline ml-1 text-primary cursor-pointer hover:text-primary-600 transition-colors"
           (click)="toggleMode()">
          {{ isLoginMode ? 'Đăng ký ngay' : 'Đăng nhập' }}
        </a>
      </span>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-fluid formgrid grid">

      <div class="field col-12 mb-4" *ngIf="!isLoginMode">
        <label for="fullname" class="block text-900 font-medium mb-2">Họ và Tên</label>
        <span class="p-input-icon-left w-full">
          <i class="pi pi-user text-500"></i>
          <input id="fullname" type="text" pInputText formControlName="full_name"
                 placeholder="Ví dụ: Nguyễn Văn A" class="w-full" />
        </span>
        <small *ngIf="form.get('full_name')?.invalid && form.get('full_name')?.touched" class="p-error block mt-1">
            Vui lòng nhập họ tên
        </small>
      </div>

      <div class="field col-12 mb-4">
        <label for="email" class="block text-900 font-medium mb-2">Email / Tên đăng nhập</label>
        <span class="p-input-icon-left w-full">
          <i class="pi pi-envelope text-500"></i>
          <input id="email" type="text" pInputText formControlName="username"
                 placeholder="example@email.com" class="w-full" />
        </span>
        <small *ngIf="form.get('username')?.invalid && form.get('username')?.touched" class="p-error block mt-1">
            Email là bắt buộc
        </small>
      </div>

      <div class="field col-12 mb-4">
        <label for="password" class="block text-900 font-medium mb-2">Mật khẩu</label>
        <p-password id="password" formControlName="password"
                    [toggleMask]="true"
                    [feedback]="!isLoginMode"
                    placeholder="Nhập mật khẩu"
                    promptLabel="Hãy nhập mật khẩu" weakLabel="Yếu"
                    mediumLabel="Trung bình" strongLabel="Mạnh"
                    styleClass="w-full"
                    inputStyleClass="w-full p-inputtext-lg"> </p-password>
        <small *ngIf="form.get('password')?.invalid && form.get('password')?.touched" class="p-error block mt-1">
            Mật khẩu tối thiểu 6 ký tự
        </small>
      </div>

      <div class="field col-12 mb-4" *ngIf="!isLoginMode">
        <label for="confirm" class="block text-900 font-medium mb-2">Xác nhận mật khẩu</label>
        <p-password id="confirm" formControlName="confirmPassword"
                    [toggleMask]="true"
                    [feedback]="false"
                    placeholder="Nhập lại mật khẩu"
                    styleClass="w-full"
                    inputStyleClass="w-full p-inputtext-lg">
        </p-password>

        <small *ngIf="form.value.password !== form.value.confirmPassword && form.get('confirmPassword')?.touched"
               class="p-error block mt-1">
          Mật khẩu xác nhận không khớp!
        </small>
      </div>

      <div class="field col-12 flex align-items-center justify-content-between mb-5">

        <div class="flex align-items-center" *ngIf="!isLoginMode">
          <p-checkbox id="terms" [binary]="true" inputId="terms"></p-checkbox>
          <label for="terms" class="ml-2 text-900 cursor-pointer">Tôi đồng ý điều khoản</label>
        </div>

        <div class="flex align-items-center" *ngIf="isLoginMode">
             <p-checkbox id="remember" [binary]="true" inputId="remember"></p-checkbox>
             <label for="remember" class="ml-2 text-900 cursor-pointer">Ghi nhớ</label>
        </div>

        <a *ngIf="isLoginMode"
           class="font-medium no-underline text-primary hover:text-primary-600 cursor-pointer text-right ml-auto">
          Quên mật khẩu?
        </a>
      </div>

      <div class="col-12">
        <p-button [label]="isLoginMode ? 'Đăng Nhập' : 'Đăng Ký'"
                  type="submit"
                  [disabled]="form.invalid || (!isLoginMode && form.value.password !== form.value.confirmPassword)"
                  styleClass="w-full p-3 text-lg font-bold border-round-lg">
        </p-button>
      </div>

    </form>
  </div>
</div>
